---
output: html_document
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(leaflet)
library(leafem)
```



<link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>

<script src="https://unpkg.com/georaster"></script>

<script src="https://unpkg.com/georaster-layer-for-leaflet/dist/georaster-layer-for-leaflet.min.js"></script>

<script src="https://unpkg.com/leaflet.locatecontrol/dist/L.Control.Locate.min.js" integrity="sha512-KDbRdPMbP+KqOQLcI3lW9fFg/e+CCo4q1eT9CEIz7Xxn1sxFA8zXCBu+yyA3WpXwmEybzWkYeB3LD7pA/C2N8A==" crossorigin=""></script>


```{r, warning = FALSE, echo = F}
leaflet(width = 0, height = 0)
```

<style>
    /* Overall map style */
    #map {position: absolute; top: 0; bottom: 0; left: 0; right: 0;width: 100%; height: 100%;}
    

    .legend {
        padding: 6px 8px;
        font: 14px Arial, Helvetica, sans-serif;
        background: white;
        background: rgba(255, 255, 255, 0.8);
        /*box-shadow: 0 0 15px rgba(0, 0, 0, 0.2);*/
        /*border-radius: 5px;*/
        line-height: 24px;
        color: #555;
    }

    .legend h4 {
        text-align: left;
        font-size: 16px;
        margin: 2px 12px 8px;
        color: #777;
    }

    .legend span {
        position: relative;
        margin: 0 0px 0 8px;
        bottom: 3px;
    }

    .legend i {
        width: 18px;
        height: 18px;
        float: left;
        margin: 0 8px 0 14px;
        opacity: 1;
    }

    .legend i.icon {
        background-size: 18px;
        background-color: rgba(255, 255, 255, 1);
    }
    

</style>
<div id="map" style="width: 100%; height: 480px; position: relative;"></div>
<script>
// Load base tiles ----

// OpenStreetMap Tiles
// Dark Matter Tiles
var DarkMatter = L.tileLayer('https://cartodb-basemaps-{s}.global.ssl.fastly.net/dark_all/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://carto.com/attributions">CARTO</a>'
});

var osm = L.tileLayer('http://{s}.tile.osm.org/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://osm.org/copyright">OpenStreetMap</a> contributors'});

        //  .. CartoDB Positron
var cartodb = L.tileLayer('http://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png', {attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors, &copy; <a href="http://cartodb.com/attributions">CartoDB</a>'});

var lyr = L.tileLayer('./{z}/{x}/{y}.png', {tms: true, opacity: 0.7, attribution: ""});

// Initiate leaflet ----
// This needs to be done before loading the Georasters
var map = L.map('map', { 
  center: [56.25, 12], // Centered on Denmark
  zoom: 9, // Worked well
  minZoom: 7,
  maxZoom: 15,
  layers: [osm, lyr] // Default layers
});

        var basemaps = {"OpenStreetMap": osm, "CartoDB Positron": cartodb, "Dark matter": DarkMatter}
        var overlaymaps = {"Layer": lyr}

        // Title
        var title = L.control();
        title.onAdd = function(map) {
            this._div = L.DomUtil.create('div', 'ctl title');
            this.update();
            return this._div;
        };
        title.update = function(props) {
            this._div.innerHTML = "";
        };
        title.addTo(map);

        // Note
        var src = 'Generated by <a href="http://www.klokan.cz/projects/gdal2tiles/">GDAL2Tiles</a>, Copyright &copy; 2008 <a href="http://www.klokan.cz/">Klokan Petr Pridal</a>,  <a href="http://www.gdal.org/">GDAL</a> &amp; <a href="http://www.osgeo.org/">OSGeo</a> <a href="http://code.google.com/soc/">GSoC</a>';
        var title = L.control({position: 'bottomleft'});
        title.onAdd = function(map) {
            this._div = L.DomUtil.create('div', 'ctl src');
            this.update();
            return this._div;
        };
        title.update = function(props) {
            this._div.innerHTML = src;
        };
        title.addTo(map);


        // Add base layers
        L.control.layers(basemaps, overlaymaps, {collapsed: true}).addTo(map);

        // Fit to overlay bounds (SW and NE points with (lat, lon))
        map.fitBounds([[54.43550000478894, 15.597828594024122], [57.769065701397686, 8.008309499375173]]);
var legend = L.control({ position: "bottomright" });
legend.onAdd = function(map) {
  var div = L.DomUtil.create("div", "legend");
  div.innerHTML += "<h4>Legend</h4>";
  div.innerHTML += '<i class="legend-icon" style="background: #a6611a"></i><span class="legend-text">Potentielle områder for rejsning af små nye skove (>5 ha) </span><br>';
  div.innerHTML += '<i class="legend-icon" style="background: #dfc27d"></i><span class="legend-text">Eksisterende naturområder, som ikke er skov</span><br>';
  div.innerHTML += '<i class="legend-icon" style="background: #006d2c"></i><span class="legend-text">Eksisterende skovområder</span><br>';
div.innerHTML += '<i class="legend-icon" style="background: #74a9cf"></i><span class="legend-text">Beliggenhed i større skovområder (>200 ha inkl. naturområder) (Lavt niveau)</span><br>';
div.innerHTML += '<i class="legend-icon" style="background: #2b8cbe"></i><span class="legend-text">Beliggenhed i større skovområder (>200 ha inkl. naturområder) (Mellemlavt niveau)</span><br>';
div.innerHTML += '<i class="legend-icon" style="background: #045a8d"></i><span class="legend-text">Beliggenhed i større skovområder (>200 ha inkl. naturområder) (Højt niveau)</span><br>';


  return div;
};

// Add legend
legend.addTo(map);

// Add locate control button
L.control.locate({
    position: 'topleft', // set the position of the control
    drawCircle: true, // controls whether a circle is drawn that shows the uncertainty about the location
    follow: true, // follow the user's location
    setView: true, // automatically sets the map view to the user's location
    keepCurrentZoomLevel: false, // keep the current map zoom level when displaying the user's location
    strings: {
        title: "Show me where I am", // title of the locate control
        popup: "You are within {distance} {unit} from this point", // text to appear if user's location is found
        outsideMapBoundsMsg: "You seem located outside the boundaries of the map" // default message for when user is outside map bounds
    },
    locateOptions: {
        maxZoom: 16 // maximum zoom level when showing the user's location
    }
}).addTo(map);

</script>